<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>CC Version Guard</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1"></script>
</head>
<body>

  <!-- Window Chrome (Draggable Region) -->
  <div class="window-drag-region">
    <div class="win-controls">
      <button class="win-btn minimize" onclick="window.app.minimize()">&#8722;</button>
      <button class="win-btn maximize" onclick="window.app.toggleMaximize()">&#9633;</button>
      <button class="win-btn close" onclick="window.app.close()">&#10005;</button>
    </div>
  </div>

  <!-- Main Application Stage -->
  <main id="main-stage">

    <!-- View 1: Welcome -->
    <section id="view-welcome" class="view active">
      <div class="center-content">
        <i class="ph-fill ph-shield-check" style="font-size: 80px; color: var(--tint-blue); margin-bottom: var(--space-3);"></i>

        <h1>Version Guard</h1>
        <p>Secure your CapCut workspace.<br>Lock your version and prevent unsolicited updates.</p>

        <div class="spacer"></div>

        <button class="btn btn-primary" onclick="window.wizard.next()">
          <span>Start Protection</span>
          <i class="ph-bold ph-arrow-right"></i>
        </button>

        <button class="btn btn-secondary" onclick="window.wizard.goToLegacy()">
          <i class="ph ph-download-simple"></i>
          <span>Download Legacy Versions</span>
        </button>
      </div>
    </section>

    <!-- View: Legacy Downloads -->
    <section id="view-legacy" class="view">
      <header style="margin-bottom: var(--space-2); text-align: center;">
        <h2>Legacy Archive</h2>
        <p>Curated stable versions.</p>
      </header>

      <div id="legacy-list-container" class="card-group" style="overflow-y: auto; max-height: 400px;">
        <!-- Injected via JS -->
      </div>

      <div class="spacer"></div>

      <button class="btn btn-secondary" onclick="window.wizard.back()">
        Back
      </button>
    </section>

    <!-- View 2: Select Version -->
    <section id="view-select" class="view">
      <header style="margin-bottom: var(--space-2); text-align: center;">
        <h2>Select Version</h2>
        <p>Choose the installation to lock.</p>
      </header>

      <!-- Dynamic List -->
      <div id="version-list-container" class="card-group">
        <!-- Injected via JS -->
      </div>

      <div class="spacer"></div>

      <button id="btn-lock-ver" class="btn btn-primary" disabled onclick="window.wizard.lockVersion()">
        <i class="ph-bold ph-lock-key"></i>
        <span>Lock Selected Version</span>
      </button>

      <button class="btn btn-secondary" onclick="window.wizard.back()">
        Back
      </button>
    </section>

    <!-- View 3: Process & Clean -->
    <section id="view-process" class="view">
      <div class="center-content">
        <i class="ph-duotone ph-gear-six" class="spin-animation" style="font-size: 64px; color: var(--tint-gray); margin-bottom: var(--space-3);"></i>

        <h3>Processing</h3>

        <div class="progress-bar-container">
          <div id="progress-bar" class="progress-bar-fill"></div>
        </div>

        <p id="process-status" class="status-text">Initializing...</p>
      </div>
    </section>

    <!-- View 4: Success -->
    <section id="view-success" class="view">
      <div class="center-content">
        <i class="ph-fill ph-check-circle" style="font-size: 80px; color: var(--tint-green); margin-bottom: var(--space-3);"></i>

        <h1>Secured</h1>
        <p>Your CapCut version is locked.<br>Automatic updates have been disabled.</p>

        <div class="spacer"></div>

        <button class="btn btn-primary" onclick="window.app.close()">
          Done
        </button>
      </div>
    </section>

  </main>

  <script src="main.js"></script>
</body>
</html>
